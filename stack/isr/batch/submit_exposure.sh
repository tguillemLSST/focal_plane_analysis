#!/usr/bin/bash

#to debug
#export input_path_batch=/sps/lsst/users/tguillem/Rubin/Focal_Plane/lsst_distrib/w_2022_01/data_PTC
#general case
export input_path_batch=/sps/lsst/groups/FocalPlane/SLAC/run5/
export output_path_batch=/sps/lsst/users/tguillem/web/batch/dark/ccd_assembly_fix_2/v4_1D/
export log_path=/sps/lsst/users/tguillem/batch_logs

#full focal plane
#runs=('13159' '13144' '13162' '13161' '13018')
runs=('13592')
rafts=('R01' 'R02' 'R03' 'R10' 'R11' 'R12' 'R13' 'R14' 'R20' 'R21' 'R22' 'R23' 'R24' 'R30' 'R31' 'R32' 'R33' 'R34' 'R41' 'R42' 'R43')
ccds=('S00' 'S01' 'S02' 'S10' 'S11' 'S12' 'S20' 'S21' 'S22')
#exposures=('3021120700078' '3021120700333')
#DOES NOT WORK: exposures=\($(cat /sps/lsst/groups/FocalPlane/SLAC/run5/butler/gen3/file.txt)\)
#exposures=$(cat /sps/lsst/users/tguillem/Rubin/stack/w_2023_34/batch/exposures_1.txt)
#exposures=$(cat /sps/lsst/groups/FocalPlane/SLAC/run6/butler/scripts/exposures_13592.txt)
#info=$(echo $exposures | awk '{print $3}')
#echo $info
#export exposure_id=\'${exposure}\'
#exposures=('3021121200145' '3021121200137' '3021121200141' '3021121200150' '3021121200151' '3021121200156' '3021121200152' '3021121200148' '3021121200139' '3021121200138' '3021121200154' '3021121200149' '3021121200153' '3021121200147' '3021121200140' '3021121200146' '3021121200143' '3021121200155' '3021121200142' '3021121200144')
#exposures=('2023111600400')
#exposures=('2023111600400' '2023111600401' '2023111600402' '2023111600403' '2023111600404' '2023111600405' '2023111600406' '2023111600407' '2023111600408' '2023111600409' '2023111600410' '2023111600411' '2023111600412' '2023111600413' '2023111600414' '2023111600415' '2023111600416' '2023111600417' '2023111600418' '2023111600419' '2023111600420' '2023111600421' '2023111600422' '2023111600423' '2023111600424' '2023111600425' '2023111600426' '2023111600427' '2023111600428' '2023111600429' '2023111600430' '2023111600431' '2023111600432' '2023111600433' '2023111600434' '2023111600435' '2023111600436' '2023111600437' '2023111600438' '2023111600439' '2023111600440' '2023111600441' '2023111600442' '2023111600443' '2023111600444' '2023111600445' '2023111600446' '2023111600447' '2023111600448' '2023111600449' '2023111600450' '2023111600451' '2023111600452' '2023111600453' '2023111600454' '2023111600455' '2023111600456' '2023111600457' '2023111600458' '2023111600459' '2023111600460' '2023111600461' '2023111600462' '2023111600463' '2023111600464' '2023111600465' '2023111600466' '2023111600467' '2023111600468' '2023111600469' '2023111600470' '2023111600471' '2023111600472' '2023111600473' '2023111600474' '2023111600475' '2023111600476' '2023111600477' '2023111600478' '2023111600479' '2023111600480' '2023111600481' '2023111600482' '2023111600483' '2023111600484' '2023111600485' '2023111600486' '2023111600487' '2023111600488' '2023111600489' '2023111600490' '2023111600491' '2023111600492' '2023111600493' '2023111600494' '2023111600495' '2023111600496' '2023111600497' '2023111600498' '2023111600499' '2023111600500' '2023111600501' '2023111600502' '2023111600503' '2023111600504' '2023111600505' '2023111600506' '2023111600507' '2023111600508' '2023111600509' '2023111600510' '2023111600511' '2023111600512' '2023111600513' '2023111600514' '2023111600515' '2023111600516' '2023111600517' '2023111600518' '2023111600519' '2023111600520' '2023111600521' '2023111600522' '2023111600523' '2023111600524' '2023111600525' '2023111600526' '2023111600527' '2023111600528' '2023111600529' '2023111600530' '2023111600531' '2023111600532' '2023111600533' '2023111600534' '2023111600535' '2023111600536' '2023111600537' '2023111600538' '2023111600539' '2023111600540' '2023111600541' '2023111600542' '2023111600543' '2023111600544' '2023111600545' '2023111600546' '2023111600547' '2023111600548' '2023111600549' '2023111600550' '2023111600551' '2023111600552' '2023111600553' '2023111600554' '2023111600555' '2023111600556' '2023111600557' '2023111600558' '2023111600559' '2023111600560' '2023111600561' '2023111600562' '2023111600563' '2023111600564' '2023111600565' '2023111600566' '2023111600567' '2023111600568' '2023111600569' '2023111600570' '2023111600571' '2023111600572' '2023111600573' '2023111600574' '2023111600575' '2023111600576' '2023111600577' '2023111600578' '2023111600579' '2023111600580' '2023111600581' '2023111600582' '2023111600583' '2023111600584' '2023111600585' '2023111600586' '2023111600587' '2023111600588' '2023111600589' '2023111600590' '2023111600591' '2023111600592' '2023111600593' '2023111600594' '2023111600595' '2023111600596' '2023111600597' '2023111600598' '2023111600599' '2023111600600' '2023111600601' '2023111600602' '2023111600603' '2023111600604' '2023111600605' '2023111600606' '2023111600607' '2023111600608' '2023111600609' '2023111600610' '2023111600611' '2023111600612' '2023111600613' '2023111600614' '2023111600615' '2023111600616' '2023111600617' '2023111600618' '2023111600619' '2023111600620' '2023111600621' '2023111600622' '2023111600623' '2023111600624' '2023111600625' '2023111600626' '2023111600627' '2023111600628' '2023111600629' '2023111600630' '2023111600631' '2023111600632' '2023111600633' '2023111600634' '2023111600635' '2023111600636' '2023111600637' '2023111600638' '2023111600639' '2023111600640' '2023111600641' '2023111600642' '2023111600643' '2023111600644' '2023111600645' '2023111600646' '2023111600647' '2023111600648' '2023111600649' '2023111600650' '2023111600651' '2023111600652' '2023111600653' '2023111600654' '2023111600655' '2023111600656' '2023111600657' '2023111600658' '2023111600659' '2023111600660' '2023111600661' '2023111600662' '2023111600663' '2023111600664' '2023111600665' '2023111600666' '2023111600667' '2023111600668' '2023111600669' '2023111600670' '2023111600671' '2023111600672' '2023111600673' '2023111600674' '2023111600675' '2023111600676' '2023111600677' '2023111600678' '2023111600679' '2023111600680' '2023111600681' '2023111600682' '2023111600683' '2023111600684' '2023111600685' '2023111600686' '2023111600687' '2023111600688' '2023111600689' '2023111600690' '2023111600691' '2023111600692' '2023111600693' '2023111600694' '2023111600695' '2023111600696' '2023111600697' '2023111600698' '2023111600699' '2023111600700' '2023111600701' '2023111600702' '2023111600703' '2023111600704' '2023111600705' '2023111600706' '2023111600707' '2023111600708' '2023111600709' '2023111600710' '2023111600711' '2023111600712' '2023111600713' '2023111600714' '2023111600715' '2023111600716' '2023111600717' '2023111600718' '2023111600719' '2023111600720' '2023111600721' '2023111600722' '2023111600723' '2023111600724' '2023111600725' '2023111600726' '2023111600727' '2023111600728' '2023111600729' '2023111600730' '2023111600731' '2023111600732' '2023111600733' '2023111600734' '2023111600735' '2023111600736' '2023111600737' '2023111600738' '2023111600739' '2023111600740' '2023111600741' '2023111600742' '2023111600743' '2023111600744' '2023111600745' '2023111600746' '2023111600747' '2023111600748' '2023111600749' '2023111600750' '2023111600751' '2023111600752' '2023111600753' '2023111600754' '2023111600755' '2023111600756' '2023111600757' '2023111600758' '2023111600759' '2023111600760' '2023111600761' '2023111600762' '2023111600763' '2023111600764' '2023111600765' '2023111600766' '2023111600767' '2023111600768' '2023111600769' '2023111600770' '2023111600771' '2023111600772' '2023111600773' '2023111600774' '2023111600775' '2023111600776' '2023111600777' '2023111600778' '2023111600779' '2023111600780' '2023111600781' '2023111600782' '2023111600783' '2023111600784' '2023111600785' '2023111600786' '2023111600787' '2023111600788' '2023111600789' '2023111600790' '2023111600791' '2023111600792' '2023111600793' '2023111600794' '2023111600795' '2023111600796' '2023111600797' '2023111600798' '2023111600799' '2023111600800' '2023111600801' '2023111600802' '2023111600803' '2023111600804' '2023111600805' '2023111600806' '2023111600807' '2023111600808' '2023111600809' '2023111600810' '2023111600811' '2023111600812' '2023111600813' '2023111600814' '2023111600815' '2023111600816' '2023111600817' '2023111600818' '2023111600819' '2023111600820' '2023111600821' '2023111600822' '2023111600823' '2023111600824' '2023111600825' '2023111600826' '2023111600827' '2023111600828' '2023111600829' '2023111600830' '2023111600831' '2023111600832' '2023111600833' '2023111600834' '2023111600835' '2023111600836' '2023111600837' '2023111600838' '2023111600839' '2023111600840' '2023111600841' '2023111600842' '2023111600843' '2023111600844' '2023111600845' '2023111600846' '2023111600847' '2023111600848' '2023111600849' '2023111600850' '2023111600851' '2023111600852' '2023111600853' '2023111600854' '2023111600855' '2023111600856' '2023111600857' '2023111600858' '2023111600859' '2023111600860' '2023111600861' '2023111600862' '2023111600863' '2023111600864' '2023111600865' '2023111600866' '2023111600867' '2023111600868' '2023111600869' '2023111600870' '2023111600871' '2023111600872' '2023111600873' '2023111600874' '2023111600875' '2023111600876' '2023111600877' '2023111600878' '2023111600879' '2023111600880' '2023111600881' '2023111600882' '2023111600883' '2023111600884' '2023111600885' '2023111600886' '2023111600887' '2023111600888' '2023111600889' '2023111600890' '2023111600891' '2023111600892' '2023111600893' '2023111600894' '2023111600895' '2023111600896' '2023111600897' '2023111600898' '2023111600899' '2023111600900' '2023111600901' '2023111600902' '2023111600903' '2023111600904' '2023111600905' '2023111600906' '2023111600907' '2023111600908' '2023111600909' '2023111600910' '2023111600911' '2023111600912' '2023111600913' '2023111600914' '2023111600915' '2023111600916' '2023111600917' '2023111600918' '2023111600919' '2023111600920' '2023111600921' '2023111600922' '2023111600923' '2023111600924' '2023111600925' '2023111600926' '2023111600927' '2023111600928' '2023111600929' '2023111600930' '2023111600931' '2023111600932' '2023111600933' '2023111600934' '2023111600935' '2023111600936' '2023111600937' '2023111600938' '2023111600939' '2023111600940' '2023111600941' '2023111600942' '2023111600943' '2023111600944' '2023111600945' '2023111600946' '2023111600947' '2023111600948' '2023111600949' '2023111600950' '2023111600951' '2023111600952' '2023111600953' '2023111600954' '2023111600955' '2023111600956' '2023111600957' '2023111600958' '2023111600959' '2023111600960' '2023111600961' '2023111600962' '2023111600963' '2023111600964' '2023111600965' '2023111600966' '2023111600967' '2023111600968' '2023111600969' '2023111600970' '2023111600971' '2023111600972' '2023111600973' '2023111600974' '2023111600975' '2023111600976' '2023111600977' '2023111600978' '2023111600979' '2023111600980' '2023111600981' '2023111600982' '2023111600983' '2023111600984' '2023111600985' '2023111600986' '2023111600987' '2023111600988' '2023111600989' '2023111600990' '2023111600991' '2023111600992' '2023111600993' '2023111600994' '2023111600995' '2023111600996' '2023111600997' '2023111600998' '2023111600999' '2023111601000' '2023111601001' '2023111601002' '2023111601003' '2023111601004' '2023111601005' '2023111601006' '2023111601007' '2023111601008' '2023111601009' '2023111601010' '2023111601011' '2023111601012' '2023111601013' '2023111601014' '2023111601015' '2023111601016' '2023111601017' '2023111601018' '2023111601019' '2023111601020' '2023111601021' '2023111601022' '2023111601023' '2023111601024' '2023111601025' '2023111601026' '2023111601027' '2023111601028' '2023111601029' '2023111601030' '2023111601031' '2023111601032' '2023111601033' '2023111601034' '2023111601035' '2023111601036' '2023111601037' '2023111601038' '2023111601039' '2023111601040' '2023111601041' '2023111601042' '2023111601043' '2023111601044' '2023111601045' '2023111601046' '2023111601047' '2023111601048' '2023111601049' '2023111601050' '2023111601051' '2023111601052' '2023111601053' '2023111601054' '2023111601055' '2023111601056' '2023111601057' '2023111601058' '2023111601059' '2023111601060' '2023111601061' '2023111601062' '2023111601063' '2023111601064' '2023111601065' '2023111601066' '2023111601067' '2023111601068' '2023111601069' '2023111601070' '2023111601071' '2023111601072' '2023111601073' '2023111601074' '2023111601075' '2023111601076' '2023111601077' '2023111601078' '2023111601079' '2023111601080' '2023111601081' '2023111601082' '2023111601083' '2023111601084' '2023111601085' '2023111601086' '2023111601087' '2023111601088' '2023111601089' '2023111601090' '2023111601091' '2023111601092' '2023111601093' '2023111601094' '2023111601095' '2023111601096' '2023111601097' '2023111601098' '2023111601099' '2023111601100' '2023111601101' '2023111601102' '2023111601103' '2023111601104' '2023111601105' '2023111601106' '2023111601107' '2023111601108' '2023111601109' '2023111601110' '2023111601111' '2023111601112' '2023111601113' '2023111601114' '2023111601115' '2023111601116' '2023111601117' '2023111601118' '2023111601119' '2023111601120' '2023111601121' '2023111601122' '2023111601123' '2023111601124' '2023111601125' '2023111601126' '2023111601127' '2023111601128' '2023111601129' '2023111601130' '2023111601131' '2023111601132' '2023111601133' '2023111601134' '2023111601135' '2023111601136' '2023111601137' '2023111601138' '2023111601139' '2023111601140' '2023111601141' '2023111601142' '2023111601143' '2023111601144' '2023111601145' '2023111601146' '2023111601147' '2023111601148' '2023111601149' '2023111601150' '2023111601151' '2023111601152' '2023111601153' '2023111601154' '2023111601155' '2023111601156' '2023111601157' '2023111601158' '2023111601159' '2023111601160' '2023111601161' '2023111601162' '2023111601163' '2023111601164' '2023111601165' '2023111601166' '2023111601167' '2023111601168' '2023111601169' '2023111601170' '2023111601171' '2023111601172' '2023111601173' '2023111601174' '2023111601175' '2023111601176' '2023111601177' '2023111601178' '2023111601179' '2023111601180' '2023111601181' '2023111601182' '2023111601183' '2023111601184' '2023111601185' '2023111601186' '2023111601187' '2023111601188' '2023111601189' '2023111601190' '2023111601191' '2023111601192' '2023111601193' '2023111601194' '2023111601195' '2023111601196' '2023111601197' '2023111601198' '2023111601199' '2023111601200' '2023111601201' '2023111601202' '2023111601203' '2023111601204' '2023111601205' '2023111601206' '2023111601207' '2023111601208' '2023111601209' '2023111601210' '2023111601211' '2023111601212' '2023111601213' '2023111601214' '2023111601215' '2023111601216' '2023111601217' '2023111601218' '2023111601219' '2023111601220' '2023111601221' '2023111601222' '2023111601223' '2023111601224' '2023111601225' '2023111601226' '2023111601227' '2023111601228' '2023111601229' '2023111601230' '2023111601231' '2023111601232' '2023111601233' '2023111601234' '2023111601235' '2023111601236' '2023111601237' '2023111601238' '2023111601239' '2023111601240' '2023111601241' '2023111601242' '2023111601243' '2023111601244' '2023111601245' '2023111601246' '2023111601247' '2023111601248' '2023111601249' '2023111601250' '2023111601251' '2023111601252' '2023111601253' '2023111601254' '2023111601255' '2023111601256' '2023111601257' '2023111601258' '2023111601259' '2023111601260' '2023111601261' '2023111601262' '2023111601263' '2023111601264' '2023111601265' '2023111601266' '2023111601267' '2023111601268' '2023111601269' '2023111601270' '2023111601271' '2023111601272' '2023111601273' '2023111601274' '2023111601275' '2023111601276' '2023111601277' '2023111601278' '2023111601279' '2023111601280' '2023111601281' '2023111601282' '2023111601283' '2023111601284' '2023111601285' '2023111601286' '2023111601287' '2023111601288' '2023111601289' '2023111601290' '2023111601291' '2023111601292' '2023111601293' '2023111601294' '2023111601295' '2023111601296' '2023111601297' '2023111601298' '2023111601299' '2023111601300' '2023111601301' '2023111601302' '2023111601303' '2023111601304' '2023111601305' '2023111601306' '2023111601307' '2023111601308' '2023111601309' '2023111601310' '2023111601311' '2023111601312' '2023111601313' '2023111601314' '2023111601315' '2023111601316' '2023111601317' '2023111601318' '2023111601319' '2023111601320' '2023111601321' '2023111601322' '2023111601323' '2023111601324' '2023111601325' '2023111601326' '2023111601327' '2023111601328' '2023111601329' '2023111601330' '2023111601331' '2023111601332' '2023111601333' '2023111601334' '2023111601335' '2023111601336' '2023111601337' '2023111601338' '2023111601339' '2023111601340' '2023111601341' '2023111601342' '2023111601343' '2023111601344' '2023111601345' '2023111601346' '2023111601347' '2023111601348' '2023111601349' '2023111601350' '2023111601351' '2023111601352' '2023111601353' '2023111601354' '2023111601355' '2023111601356' '2023111601357' '2023111601358' '2023111601359' '2023111601360' '2023111601361' '2023111601362' '2023111601363' '2023111601364' '2023111601365' '2023111601366' '2023111601367' '2023111601368' '2023111601369' '2023111601370' '2023111601371' '2023111601372' '2023111601373' '2023111601374' '2023111601375' '2023111601376' '2023111601377' '2023111601378' '2023111601379' '2023111601380' '2023111601381' '2023111601382' '2023111601383' '2023111601384' '2023111601385' '2023111601386' '2023111601387' '2023111601388' '2023111601389' '2023111601390' '2023111601391' '2023111601392' '2023111601393' '2023111601394' '2023111601395' '2023111601396' '2023111601397' '2023111601398' '2023111601399' '2023111601400' '2023111601401' '2023111601402' '2023111601403' '2023111601404' '2023111601405' '2023111601406' '2023111601407' '2023111601408' '2023111601409' '2023111601410' '2023111601411' '2023111601412' '2023111601413' '2023111601414' '2023111601415' '2023111601416' '2023111601417' '2023111601418' '2023111601419' '2023111601420' '2023111601421' '2023111601422' '2023111601423' '2023111601424' '2023111601425' '2023111601426' '2023111601427' '2023111601428' '2023111601429' '2023111601430' '2023111601431' '2023111601432' '2023111601433' '2023111601434' '2023111601435' '2023111601436' '2023111601437' '2023111601438' '2023111601439' '2023111601440' '2023111601441' '2023111601442' '2023111601443' '2023111601444' '2023111601445' '2023111601446' '2023111601447' '2023111601448' '2023111601449' '2023111601450' '2023111601451' '2023111601452' '2023111601453' '2023111601454' '2023111601455' '2023111601456' '2023111601457' '2023111601458' '2023111601459' '2023111601460' '2023111601461' '2023111601462' '2023111601463' '2023111601464' '2023111601465' '2023111601466' '2023111601467' '2023111601468' '2023111601469' '2023111601470' '2023111601471' '2023111601472' '2023111601473' '2023111601474' '2023111601475' '2023111601476' '2023111601477' '2023111601478' '2023111601479' '2023111601480' '2023111601481' '2023111601482' '2023111601483' '2023111601484' '2023111601485' '2023111601486' '2023111601487' '2023111601488' '2023111601489' '2023111601490' '2023111601491' '2023111601492' '2023111601493' '2023111601494' '2023111601495' '2023111601496' '2023111601497' '2023111601498' '2023111601499' '2023111601500' '2023111601501' '2023111601502' '2023111601503' '2023111601504' '2023111601505' '2023111601506' '2023111601507' '2023111601508' '2023111601509' '2023111601510' '2023111601511' '2023111601512' '2023111601513' '2023111601514' '2023111601515' '2023111601516' '2023111601517' '2023111601518' '2023111601519' '2023111601520' '2023111601521' '2023111601522' '2023111601523' '2023111601524' '2023111601525' '2023111601526' '2023111601527' '2023111601528' '2023111601529' '2023111601530' '2023111601531' '2023111601532' '2023111601533' '2023111601534' '2023111601535' '2023111601536' '2023111601537' '2023111601538' '2023111601539' '2023111601540' '2023111601541' '2023111601542' '2023111601543' '2023111601544' '2023111601545' '2023111601546' '2023111601547' '2023111601548' '2023111601549' '2023111601550' '2023111601551' '2023111601552' '2023111601553' '2023111601554' '2023111601555' '2023111601556' '2023111601557' '2023111601558' '2023111601559' '2023111601560' '2023111601561' '2023111601562' '2023111601563' '2023111601564' '2023111601565' '2023111601566' '2023111601567' '2023111601568' '2023111601569' '2023111601570' '2023111601571' '2023111601572' '2023111601573' '2023111601574' '2023111601575' '2023111601576' '2023111601577' '2023111601578' '2023111601579' '2023111601580' '2023111601581' '2023111601582' '2023111601583' '2023111601584' '2023111601585' '2023111601586' '2023111601587' '2023111601588' '2023111601589' '2023111601590' '2023111601591' '2023111601592' '2023111601593' '2023111601594' '2023111601595' '2023111601596' '2023111601597' '2023111601598' '2023111601599' '2023111601600' '2023111601601' '2023111601602' '2023111601603' '2023111601604' '2023111601605' '2023111601606' '2023111601607' '2023111601608' '2023111601609' '2023111601610' '2023111601611' '2023111601612' '2023111601613' '2023111601614' '2023111601615' '2023111601616' '2023111601617' '2023111601618' '2023111601619' '2023111601620' '2023111601621' '2023111601622' '2023111601623' '2023111601624' '2023111601625' '2023111601626' '2023111601627' '2023111601628' '2023111601629' '2023111601630' '2023111601631' '2023111601632' '2023111601633' '2023111601634' '2023111601635' '2023111601636' '2023111601637' '2023111601638' '2023111601639' '2023111601640' '2023111601641' '2023111601642' '2023111601643' '2023111601644' '2023111601645' '2023111601646' '2023111601647' '2023111601648' '2023111601649' '2023111601650' '2023111601651' '2023111601652' '2023111601653' '2023111601654' '2023111601655' '2023111601656' '2023111601657' '2023111601658' '2023111601659' '2023111601660' '2023111601661' '2023111601662' '2023111601663' '2023111601664' '2023111601665' '2023111601666' '2023111601667' '2023111601668' '2023111601669' '2023111601670' '2023111601671' '2023111601672' '2023111601673' '2023111601674' '2023111601675' '2023111601676' '2023111601677' '2023111601678' '2023111601679' '2023111601680' '2023111601681' '2023111601682' '2023111601683' '2023111601684' '2023111601685' '2023111601686' '2023111601687' '2023111601688' '2023111601689' '2023111601690' '2023111601691' '2023111601692' '2023111601693' '2023111601694' '2023111601695' '2023111601696' '2023111601697' '2023111601698' '2023111601699' '2023111601700' '2023111601701' '2023111601702' '2023111601703' '2023111601704' '2023111601705' '2023111601706' '2023111601707' '2023111601708' '2023111601709' '2023111601710' '2023111601711' '2023111601712' '2023111601713' '2023111601714' '2023111601715' '2023111601716' '2023111601717' '2023111601718' '2023111601719' '2023111601720' '2023111601721' '2023111601722' '2023111601723' '2023111601724' '2023111601725' '2023111601726' '2023111601727' '2023111601728' '2023111601729' '2023111601730' '2023111601731' '2023111601732' '2023111601733' '2023111601734' '2023111601735' '2023111601736' '2023111601737' '2023111601738' '2023111601739' '2023111601740' '2023111601741' '2023111601742' '2023111601743' '2023111601744' '2023111601745' '2023111601746' '2023111601747' '2023111601748' '2023111601749' '2023111601750' '2023111601751' '2023111601752' '2023111601753' '2023111601754' '2023111601755' '2023111601756' '2023111601757' '2023111601758' '2023111601759' '2023111601760' '2023111601761' '2023111601762' '2023111601763' '2023111601764' '2023111601765' '2023111601766' '2023111601767' '2023111601768' '2023111601769' '2023111601770' '2023111601771' '2023111601772' '2023111601773' '2023111601774' '2023111601775' '2023111601776' '2023111601777' '2023111601778' '2023111601779' '2023111601780' '2023111601781' '2023111601782' '2023111601783' '2023111601784' '2023111601785' '2023111601786' '2023111601787' '2023111601788' '2023111601789' '2023111601790' '2023111601791' '2023111601792' '2023111601793' '2023111601794' '2023111601795' '2023111601796' '2023111601797' '2023111601798' '2023111601799' '2023111601800' '2023111601801' '2023111601802' '2023111601803' '2023111601804' '2023111601805' '2023111601806' '2023111601807' '2023111601808' '2023111601809' '2023111601810' '2023111601811' '2023111601812' '2023111601813' '2023111601814' '2023111601815' '2023111601816' '2023111601817' '2023111601818' '2023111601819' '2023111601820' '2023111601821' '2023111601822' '2023111601823' '2023111601824' '2023111601825' '2023111601826' '2023111601827' '2023111601828' '2023111601829' '2023111601830' '2023111601831' '2023111601832' '2023111601833' '2023111601834' '2023111601835' '2023111601836' '2023111601837' '2023111601838' '2023111601839' '2023111601840' '2023111601841' '2023111601842' '2023111601843' '2023111601844' '2023111601845' '2023111601846' '2023111601847' '2023111601848' '2023111601849' '2023111601850' '2023111601851' '2023111601852' '2023111601853' '2023111601854' '2023111601855' '2023111601856' '2023111601857' '2023111601858' '2023111601859' '2023111601860' '2023111601861' '2023111601862' '2023111601863' '2023111601864' '2023111601865' '2023111601866' '2023111601867' '2023111601868' '2023111601869' '2023111601870' '2023111601871' '2023111601872' '2023111601873' '2023111601874' '2023111601875' '2023111601876' '2023111601877' '2023111601878' '2023111601879' '2023111601880' '2023111601881' '2023111601882' '2023111601883' '2023111601884' '2023111601885' '2023111601886' '2023111601887' '2023111601888' '2023111601889' '2023111601890' '2023111601891' '2023111601892' '2023111601893' '2023111601894' '2023111601895' '2023111601896' '2023111601897' '2023111601898' '2023111601899' '2023111601900' '2023111601901' '2023111601902' '2023111601903' '2023111601904' '2023111601905' '2023111601906' '2023111601907' '2023111601908' '2023111601909' '2023111601910' '2023111601911' '2023111601912' '2023111601913' '2023111601914' '2023111601915' '2023111601916' '2023111601917' '2023111601918' '2023111601919' '2023111601920' '2023111601921' '2023111601922' '2023111601923' '2023111601924' '2023111601925' '2023111601926' '2023111601927' '2023111601928' '2023111601929' '2023111601930' '2023111601931' '2023111601932' '2023111601933' '2023111601934' '2023111601935' '2023111601936' '2023111601937' '2023111601938' '2023111601939' '2023111601940' '2023111601941' '2023111601942' '2023111601943' '2023111601944' '2023111601945' '2023111601946' '2023111601947' '2023111601948' '2023111601949' '2023111601950' '2023111601951' '2023111601952' '2023111601953' '2023111601954' '2023111601955' '2023111601956' '2023111601957' '2023111601958' '2023111601959' '2023111601960' '2023111601961' '2023111601962' '2023111601963' '2023111601964' '2023111601965' '2023111601966' '2023111601967' '2023111601968' '2023111601969' '2023111601970' '2023111601971' '2023111601972' '2023111601973' '2023111601974' '2023111601975' '2023111601976' '2023111601977' '2023111601978' '2023111601979' '2023111601980' '2023111601981' '2023111601982' '2023111601983' '2023111601984' '2023111601985' '2023111601986' '2023111601987' '2023111601988' '2023111601989' '2023111601990' '2023111601991' '2023111601992' '2023111601993' '2023111601994' '2023111601995' '2023111601996' '2023111601997' '2023111601998' '2023111601999' '2023111602000' '2023111602001' '2023111602002' '2023111602003' '2023111602004' '2023111602005' '2023111602006' '2023111602007' '2023111602008' '2023111602009' '2023111602010' '2023111602011' '2023111602012' '2023111602013' '2023111602014' '2023111602015' '2023111602016' '2023111602017' '2023111602018' '2023111602019' '2023111602020' '2023111602021' '2023111602022' '2023111602023' '2023111602024' '2023111602025' '2023111602026' '2023111602027' '2023111602028' '2023111602029' '2023111602030' '2023111602031' '2023111602032' '2023111602033' '2023111602034' '2023111602035' '2023111602036' '2023111602037' '2023111602038' '2023111602039' '2023111602040' '2023111602041' '2023111602042' '2023111602043' '2023111602044' '2023111602045' '2023111602046' '2023111602047' '2023111602048' '2023111602049' '2023111602050' '2023111602051' '2023111602052' '2023111602053' '2023111602054' '2023111602055' '2023111602056' '2023111602057' '2023111602058' '2023111602059' '2023111602060' '2023111602061' '2023111602062' '2023111602063' '2023111602064' '2023111602065' '2023111602066' '2023111602067' '2023111602068' '2023111602069' '2023111602070' '2023111602071' '2023111602072' '2023111602073' '2023111602074' '2023111602075' '2023111602076' '2023111602077' '2023111602078' '2023111602079' '2023111602080' '2023111602081' '2023111602082' '2023111602083' '2023111602084' '2023111602085' '2023111602086' '2023111602087' '2023111602088' '2023111602089' '2023111602090' '2023111602091' '2023111602092' '2023111602093' '2023111602094' '2023111602095' '2023111602096' '2023111602097' '2023111602098' '2023111602099' '2023111602100' '2023111602101' '2023111602102' '2023111602103' '2023111602104' '2023111602105' '2023111602106' '2023111602107' '2023111602108' '2023111602109' '2023111602110' '2023111602111' '2023111602112' '2023111602113' '2023111602114' '2023111602115' '2023111602116' '2023111602117' '2023111602118' '2023111602119' '2023111602120' '2023111602121' '2023111602122' '2023111602123' '2023111602124' '2023111602125' '2023111602126' '2023111602127' '2023111602128' '2023111602129' '2023111602130' '2023111602131' '2023111602132' '2023111602133' '2023111602134' '2023111602135' '2023111602136' '2023111602137' '2023111602138' '2023111602139' '2023111602140' '2023111602141' '2023111602142' '2023111602143' '2023111602144' '2023111602145' '2023111602146' '2023111602147' '2023111602148' '2023111602149' '2023111602150' '2023111602151' '2023111602152' '2023111602153' '2023111602154' '2023111602155' '2023111602156' '2023111602157' '2023111602158' '2023111602159' '2023111602160' '2023111602161' '2023111602162' '2023111602163' '2023111602164' '2023111602165' '2023111602166' '2023111602167' '2023111602168' '2023111602169' '2023111602170' '2023111602171' '2023111602172' '2023111602173' '2023111602174' '2023111602175' '2023111602176' '2023111602177' '2023111602178' '2023111602179' '2023111602180' '2023111602181' '2023111602182' '2023111602183' '2023111602184' '2023111602185' '2023111602186' '2023111602187' '2023111602188' '2023111602189' '2023111602190' '2023111602191' '2023111602192' '2023111602193' '2023111602194' '2023111602195' '2023111602196' '2023111602197' '2023111602198' '2023111602199' '2023111602200' '2023111602201' '2023111602202' '2023111602203' '2023111602204' '2023111602205' '2023111602206' '2023111602207' '2023111602208' '2023111602209' '2023111602210' '2023111602211' '2023111602212' '2023111602213' '2023111602214' '2023111602215' '2023111602216' '2023111602217' '2023111602218' '2023111602219' '2023111602220' '2023111602221' '2023111602222' '2023111602223' '2023111609999')

#exposures=('2023111600400' '2023111600401' '2023111600402' '2023111600403' '2023111600404' '2023111600405' '2023111600406' '2023111600407' '2023111600408' '2023111600409' '2023111600410' '\2023111600411')

###new method reading lines
unset exposures
i=0
while read -r line;
do
  exposures[$i]=$line
  i=$(($i+1))
done < /sps/lsst/groups/FocalPlane/SLAC/run6/butler/scripts/exposures_13592.txt
#echo ${exposures[*]}

#just one job
rafts=('R01')
ccds=('S00')
for run in "${runs[@]}" ;do
    for raft in "${rafts[@]}" ;do
	for ccd in "${ccds[@]}" ;do
	    #for exposure in "${exposures[@]}" ;do
	    for i in {0..364};do
		echo "---Run: $run"
		echo "Raft: $raft"
		echo "CCD: $ccd"
		#echo "Exposure: $exposure"
	        #qsub -P P_lsst -o ${log_path} -e ${log_path} -v run=${run} -v raft=${raft} -v ccd=${ccd} -v input_path=${input_path_batch} -v output_path=${output_path_batch} run_batch.sh
	        #--mem=64G
	        #sbatch --mem=64G --export=run=${run},raft=${raft},ccd=${ccd},input_path=${input_path_batch},output_path=${output_path_batch} run_batch.sh 
		#sbatch -t 12:00:00 --cpus-per-task=1 --mem=2G --export=run=${run},raft=${raft},ccd=${ccd},exposure=${exposure} run_batch_exposure.sh
		j=5*i
		#echo ${exposures[j+1]}
		sbatch -t 24:00:00 --cpus-per-task=1 --mem=2G --export=run=${run},raft=${raft},ccd=${ccd},exposure_1=${exposures[j]},exposure_2=${exposures[j+1]},exposure_3=${exposures[j+2]},exposure_4=${exposures[j+3]},exposure_5=${exposures[j+4]} run_batch_exposure.sh
	    done
	done
    done
done
#qsub -P P_lsst -v run=${run_batch} -v raft='R14' -v ccd='S22' -v input_path=${input_path_batch} -v output_path=${output_path_batch} run_batch.sh
